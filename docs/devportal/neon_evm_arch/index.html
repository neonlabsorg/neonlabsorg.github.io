<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Welcome Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Welcome Blog Atom Feed"><title data-react-helmet="true">Overview of Neon EVM Architecture | Welcome</title><meta data-react-helmet="true" property="og:url" content="https://doc.neonlabs.org/docs/devportal/neon_evm_arch"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Overview of Neon EVM Architecture | Welcome"><meta data-react-helmet="true" name="description" content="This section describes the architectural solutions built into the Neon EVM that enable fast transaction processing for Ethereum users. It also describes how tokens pass from users to final consumers."><meta data-react-helmet="true" property="og:description" content="This section describes the architectural solutions built into the Neon EVM that enable fast transaction processing for Ethereum users. It also describes how tokens pass from users to final consumers."><link data-react-helmet="true" rel="shortcut icon" href="/img/fav_192.png"><link data-react-helmet="true" rel="canonical" href="https://doc.neonlabs.org/docs/devportal/neon_evm_arch"><link data-react-helmet="true" rel="alternate" href="https://doc.neonlabs.org/docs/devportal/neon_evm_arch" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://doc.neonlabs.org/docs/devportal/neon_evm_arch" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f49b6066.css">
<link rel="preload" href="/assets/js/runtime~main.24ee2ff4.js" as="script">
<link rel="preload" href="/assets/js/main.d027b4ae.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Neon Docs</b></a><a class="navbar__item navbar__link" href="/docs/devportal/eth_sol_solution">Develop</a><a class="navbar__item navbar__link" href="/docs/software_manuals/foundational_topics/web3">Manuals</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Devportal</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/eth_sol_solution">Ethereum and Solana capabilities in a single solution</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/devportal/neon_evm_arch">Overview of Neon EVM Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/value_token">Transaction Value token as an analogue of ETH for Neon EVM Solutions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/metamask_setup">Installing and setting up MetaMask</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/bpf_trace">BPF trace</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Testnet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Local Solana cluster</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Neon Swap</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Software manuals</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Overview of Neon EVM Architecture</h1></header><blockquote><p><em>This section describes the architectural solutions built into the Neon EVM that enable fast transaction processing for Ethereum users. It also describes how tokens pass from users to final consumers.</em></p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="general"></a>General<a class="hash-link" href="#general" title="Direct link to heading">#</a></h2><p>For a user&#x27;s transaction to be executed quickly, it must be finalized quickly. Therefore, the main task for Neon EVM developers is to ensure the prompt finalization of a transaction. Also, solutions should be developed to ensure the creation of liquid tokens by Neon EVM users and their circulation within Solana.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solution"></a>Solution<a class="hash-link" href="#solution" title="Direct link to heading">#</a></h2><p>The architectural solution based on Neon EVM is presented in Fig. 1.</p><p align="center"></p><p><img src="/assets/images/arch-neon-1-0f5981862d06925936727d49164f736a.png"><br>
Fig. 1 </p>  <p></p><p>Below are component descriptions of the architectural solution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-evm-user-user"></a>Neon EVM user (user)<a class="hash-link" href="#neon-evm-user-user" title="Direct link to heading">#</a></h3><p>Any user who has an account in Neon EVM with a balance in ETH, ERC20, and ERC721 tokens.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solana-transaction-s-trx"></a>Solana transaction (S-trx)<a class="hash-link" href="#solana-transaction-s-trx" title="Direct link to heading">#</a></h3><p>A transaction formed according to Solana network rules with a signature produced by Solana rules.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-transaction-n-trx"></a>Neon transaction (N-trx)<a class="hash-link" href="#neon-transaction-n-trx" title="Direct link to heading">#</a></h3><p>A transaction formed according to Ethereum rules with a signature produced by Ethereum rules.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-evm-client-client"></a>Neon EVM client (client)<a class="hash-link" href="#neon-evm-client-client" title="Direct link to heading">#</a></h3><p>An application that has an EVM (Solidity/Vyper/etc.) bytecode contract loaded into Neon EVM. The application generates a transaction <em>N-trx</em> according to Ethereum rules and sends it to a proxy. Before sending <em>N-trx</em>, the client transfers the required funds to the Solana deposit to cover the costs of an operator.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-evm-operator-operator"></a>Neon EVM operator (operator)<a class="hash-link" href="#neon-evm-operator-operator" title="Direct link to heading">#</a></h3><p>Role performed by a Solana account using a software tool. Within Neon EVM, an operator is provided with software in the form of a proxy to fulfill certain functions. The operator can deploy either one or several proxies. They can also configure one proxy for multiple operators, as well as run several proxies with different settings.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-web3-proxy-proxy"></a>Neon Web3 Proxy (proxy)<a class="hash-link" href="#neon-web3-proxy-proxy" title="Direct link to heading">#</a></h3><p>The software that an operator uses to do their job. Although the proxy is not a mandatory component in the Neon EVM architecture (for example, proxy logic can be implemented inside a client&#x27;s browser), implementing it as a separate component can speed up transaction processing. In the Neon EVM Mainnet, proxy must provide multithreading to work in parallel.  </p><p>The proxy contains an EVM emulator that pre-tests the execution of the transaction. This testing determines the number of coins required on the operator&#x27;s balance, as well as the current exchange rate of SOL to ETH. Each operator configures their proxy server with this course in mind. This relates to economic motivation.  </p><p>A proxy converts <em>N-trx</em> into transactions under Solana rules. <em>N-trx</em> is signed by a user, while <em>S-trxs</em> are signed by an operator. A separate account is created in Solana, to which the Neon transaction text is loaded from the received <em>S-trxs</em>. Neon EVM receives a command to execute the transaction located at this account address.  </p><p>Below is a list of the main Neon Web3 Proxy features that are implemented in the Neon EVM Testnet:</p><ul><li>Receiving requests over Web3 API protocol.</li><li>Shaping responses using Web3 API protocol.</li><li>Packaging a Neon transaction into a Solana transaction; the Solana transaction contains the following information:<ul><li>The Neon EVM operator account from which the amount in SOL tokens should be withdrawn for execution.</li><li>The Neon EVM operator account where a payment is sent for the job done in tokens specified by the user.</li><li>The Neon EVM account to deposit funds to be spent for iterative execution of a transaction.</li><li>List of accounts participating in the execution of Neon transactions (formed according to Solana rules).</li><li>The number of steps per iteration of a Neon transaction.</li></ul></li><li>Executing read-only Solidity methods of contracts.</li><li>Providing a method for linking accounts from SPL-token contracts to ERC20; SPL-wrapper to access SPL-token contracts via Neon transactions.</li><li>Providing a user with a method to switch a token to be used for gas payment.</li><li>Providing a user with a method to execute an Neon transaction without a test run.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-evm"></a>Neon EVM<a class="hash-link" href="#neon-evm" title="Direct link to heading">#</a></h3><p>This is an Ethereum Virtual Machine compiled into Berkeley Packet Filter bytecode of a virtual machine running on Solana. Neon EVM is configured using a multisig EVM account that looks like a decentralized Neon EVM governance. Participants of the multisig EVM account (actors) can change the Neon EVM code and set up Neon EVM parameters.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-evm-governance-participant"></a>Neon EVM governance participant<a class="hash-link" href="#neon-evm-governance-participant" title="Direct link to heading">#</a></h3><p>The functions performed by the governance participants:</p><ul><li>Updating contracts.</li><li>Adding functionality.</li><li>Eliminating shortcomings in the program code.</li><li>Changing parameters in the settings (the fee value, opening new balance, the <em>Mn</em> value, the max number of iterations, etc.).  </li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="erc20-tkn"></a>ERC20 TKN<a class="hash-link" href="#erc20-tkn" title="Direct link to heading">#</a></h3><p>This is a contract based on the ERC20 standard token. A ERC20 token shows user balances for a certain ticker. After an account (user-acc) selects a type of token, this contract becomes blocked.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="spl-token"></a>SPL token<a class="hash-link" href="#spl-token" title="Direct link to heading">#</a></h3><p>SPL token (Solana Program Library token) is a contract containing a system register of tokens that are in the system along with the Solana balances of their users. The contract implements the ERC20 interface â€” this is a description of the basic set of functions that the contract must support. Transferring funds is possible only with a contract that supports this operation.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solana"></a>Solana<a class="hash-link" href="#solana" title="Direct link to heading">#</a></h3><p>This is a blockchain containing a stream of blocks. It stores a block-log of completed operations. It also contains the current Solana state, where the results of transactions, accounts, and public keys are stored. There are also 2 balances: one for ETH tokens and and another for the token in which the transaction will be paid.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="erc20-wrapper"></a>ERC20 Wrapper<a class="hash-link" href="#erc20-wrapper" title="Direct link to heading">#</a></h3><p>This is a separate contract developed based on the ERC20 standard. It contains maps with user balances. Although this contract is hosted inside Neon EVM, it is completely standalone and independent.  </p><p>A user can create a contract supporting the ERC20 standard for a specific token and generate the required number of tokens (coins). These tokens will only be liquid within Neon EVM. For these coins to be liquid in Solana, the SPL Token and ERC20 TKN contracts must be interoperable. This function is performed by the ERC20 Wrapper contract.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="economic-game-as-a-means-of-stimulating-operators"></a>Economic game as a means of stimulating operators<a class="hash-link" href="#economic-game-as-a-means-of-stimulating-operators" title="Direct link to heading">#</a></h2><p>Processing of a transaction is conventionally divided into several steps (iterations). Depending on the number of operations required to complete the transaction, the number of steps may vary. The next step starts only after the previous step has been successfully completed (Fig. 2).</p><p align="center"></p><p><img src="/assets/images/arch-neon-2-e3ac3d5fe116d104c08fe5cb42e5ba90.png"><br>
Fig. 2 </p>  <p></p><p>A transaction will be considered successfully completed if the &quot;Final&quot; step finishes. The execution of the transaction should not go beyond the allotted number of <em>Mn</em> blocks. This means that the operations performed at all steps must be completed within the <em>Mn</em> period, otherwise, the transaction is considered incomplete.  </p><p>A user who forms a transaction indicates an operator (proxy) within it that will be responsible for its execution. Each operator has a deposit account in Neon EVM. These accounts belong to Neon EVM, so no one can withdraw funds from the deposit until the finalization step is completed. Before processing a transaction, Neon EVM debits the amount of funds from the operator account (op-acc) and transfers them to the operator&#x27;s deposit (dep-acc).  </p><p>If for any reason (for example, due to a lack of funds on a deposit), an operation is not performed at a step, the next operator starts processing this transaction from the current step. This operator does not deposit any funds for the remaining steps. If they also do not complete all of the remaining steps, this process is passed to the next operator. At the &quot;Final&quot; step, a transaction is created to withdraw funds from the deposit in full, and credit them to the operator who completed this step. This implementation obliges not only the client, but also any operator involved in processing the transaction, to be interested in its successful completion.  </p><p><strong>Example</strong><br>
<em>Step 1</em> - transferring funds to a deposit.<br>
<em>Step 2</em> - blocking an account.<br>
<em>Steps</em> - other actions.<br>
<em>Final</em> - the deposit is returned to the operator&#x27;s account (op acc). Results of the transaction have already been reflected in Solana State.  </p><p>In the Neon EVM settings, there is a limit on the number of blocks (<em>Mn</em>) during which a transaction must be completed. By default, the <em>Mn</em> value is 1 (that is, a transaction must be completed during the processing of one block). There is also a limit on the number of steps (the maximum number of iterations) to complete a transaction.
The values <em>Mn</em> and number of iterations are set by a Multisig account. The number of steps is also limited by funds on a user&#x27;s balance.  </p><p>At every step, the &quot;Continue&quot; operation checks if this is the last step in the transaction execution or not.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-can-operators-find-out-about-transactions-ready-to-be-continued"></a>How can operators find out about transactions ready to be continued?<a class="hash-link" href="#how-can-operators-find-out-about-transactions-ready-to-be-continued" title="Direct link to heading">#</a></h3><p>Solana&#x27;s entire history is stored in Solana State. Using this history, the operator can obtain the necessary information about all transactions related to Neon EVM. The proxy can track incomplete transactions in this history: transactions that can be continued by another operator. The operator who wishes to continue the execution of the unfinished transaction must first re-sign it with their key. If the number of blocks does not exceed <em>Mn</em> since processing was begun by the previous operator, the signature of the initial operator is kept. If the number of blocks exceeds <em>Mn</em>, the transaction can be re-signed by any operator.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="special-cases"></a>Special cases<a class="hash-link" href="#special-cases" title="Direct link to heading">#</a></h3><p><em>Case 1</em>. One of the initial and mandatory operations is blocking an account, that is, the execution of other transactions is blocked for this time.  </p><p>For an operator to be interested in reducing this time, they  must complete a transaction in Mn blocks, otherwise another operator will perform this transaction.  </p><p>For example, to go from step <em>1</em> to step <em>2</em> (see Fig.2), operator <em>1</em> must process <em>Mn</em> blocks. During this time, the &quot;Continue&quot; operation will not be available to other operators. If operator <em>1</em> is unable to complete a transaction during the processing of <em>Mn</em> blocks, this transaction remains incomplete. The funds on the balance are burned out.  </p><p>Therefore, every operator is interested in using high-speed resources.  </p><p><em>Case 2</em>. A transaction cannot be completed if an error occurs.<br>
If step <em>1</em> is completed, and &quot;Cancel&quot; occurred in step <em>2</em>, the funds are not returned to the operator. They cannot withdraw funds from a client for partial execution of a transaction. The funds are also not returned to the client. In this case, the funds on the deposit will be burned. To avoid losing funds, the operator is compelled to complete the transaction in full; not in part.  </p><p><em>Case 3</em>. Before executing a transaction, funds are checked on the user&#x27;s balance, and it is also checked whether the gas limit will be exceeded. If there is a shortage of funds at some step, the transaction is fixed as &quot;Fail&quot;. In this case, funds are debited from the user&#x27;s account and transferred to the operator&#x27;s account.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="transferring-tokens-inside-solana"></a>Transferring tokens inside Solana<a class="hash-link" href="#transferring-tokens-inside-solana" title="Direct link to heading">#</a></h2><p>A special dApp (contract) with its token balances has been created as the ERC20 Wrapper. Application users know the address of this dApp. To transfer funds, they need to contact this dApp address specifying an account and the amount of funds to transfer. The transfer will take place within this contract.  </p><p>The interaction between SPL Token and ERC20 TKN is shown in Fig.3.  </p><p align="center"></p><p><img src="/assets/images/arch-neon-3-e172ae64e3592eb6aeaff04e381d42c3.png"><br>
Fig. 3 </p>  <p></p><p>There are 2 user balances:  </p><ul><li>User SPL Balance, whose tokens are traded within Solana.</li><li>User ERC20 Balance, whose tokens are traded within the Neon EVM.  </li></ul><p>The ERC20 Wrapper allows users to transfer their SPL tokens on the &quot;ERC20 Balance&quot;, exchange them for tokens they need and withdraw them back. Thus, a user can create a token inside Neon EVM and transfer any number of coins from &quot;User SPL Balance&quot; to &quot;User ERC20 Balance&quot;. Then, using EVM contracts, they can use these coins.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="payment-queues"></a>Payment queues<a class="hash-link" href="#payment-queues" title="Direct link to heading">#</a></h3><p><strong>Issue description</strong><br>
If the ERC20 TKN contract contains only one map for all users with their balances, the following conflict situation is possible: if the majority of users pay with ETH tokens, then the same contract will appear inside each <em>N-trx</em>, within which the value will need to be changed. This will cause all <em>N-trxs</em> to line up in one queue and they cannot be executed in parallel.  </p><p>This is because at the final step, the funds would be transferred from the user&#x27;s balance to the operator&#x27;s balance within one contract.  </p><p><strong>Solution</strong><br>
The default token type field along with the balance is added to the Neon account. This field will allow a user to select a type of token for payment using the special option. To transfer SPL tokens from outside to an operator&#x27;s account, use the ERC20 Wrapper.  </p><p>The Neon client does not have an option to select a type of token for payment and can only operate with ETH. Therefore, the storage of funds is implemented in the user&#x27;s Solana State. The Neon account (user-acc) has a separate field that specifies the type of token. After a user specifies a type of token, this type will be indicated in the account field of this user. Having this information, Solana can turn to ERC20 Wrapper to convert tokens.  </p><p>An operator creates a deposit account for the transaction. It is possible to create a pool of such deposit accounts, so that the ERC20 Wrapper logic will select the desired transaction from this pool, and not create a queue for the payment of funds to the operator.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="transferring-tokens-between-solana-and-ethereum"></a>Transferring tokens between Solana and Ethereum<a class="hash-link" href="#transferring-tokens-between-solana-and-ethereum" title="Direct link to heading">#</a></h2><p>The ERC20 Wrapper allows users to manipulate balances inside SPL Token. The user runs an application inside Neon EVM with logic that releases new coins. To transfer these coins to the outside world, they need to use the ERC20 Bridge implementation. Inside Neon EVM, these coins will be blocked and transferred inside SPL Token to different addresses. They will become liquid inside Solana, but under a different token name, which is registered inside Solana.  </p><p>A user also can transfer part of the funds to their balance inside Neon EVM and convert them into a new token using a token exchange algorithm of their choice.  </p><p>Fig. 4 shows the scheme for transferring tokens between Solana and Ethereum.  </p><p align="center"></p><p><img src="/assets/images/arch-neon-4-498dfbc8faf7b14169b936ca211ec579.png"><br>
Fig. 4 </p>  <p></p><p>Ethereum tokens are generated in accordance with the ERC20 standard. Therefore, to transfer tokens between the Solana and Ethereum blockchains, a separate ERC20 Wrapper must be deployed for each Solana token. The task of the ERC20 Wrapper is to ensure the interaction of the Solana applications with EVM (Solidity/Vyper/etc.) bytecode contracts, as well as to transfer funds in Solana tokens using Ethereum wallets such as Metamask.  </p><p>The main interacting component in the token transfer is the ERC20 Bridge, which is a separate contract. When itâ€™s called, it generates a Solana token which represents the corresponding ERC20 token in the SPL Token contract. The Solana tokens registered in the SPL Token contract can be transferred to Solana contracts.  </p><p>Bridge operators are responsible for the ERC20 Bridge operation. They get fees from the conversion of tokens.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/neonlabsorg/neon-evm.docs/docs/devportal/neon_evm_arch.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/devportal/eth_sol_solution"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Ethereum and Solana capabilities in a single solution</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/devportal/value_token"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transaction Value token as an analogue of ETH for Neon EVM Solutions Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general" class="table-of-contents__link">General</a></li><li><a href="#solution" class="table-of-contents__link">Solution</a><ul><li><a href="#neon-evm-user-user" class="table-of-contents__link">Neon EVM user (user)</a></li><li><a href="#solana-transaction-s-trx" class="table-of-contents__link">Solana transaction (S-trx)</a></li><li><a href="#neon-transaction-n-trx" class="table-of-contents__link">Neon transaction (N-trx)</a></li><li><a href="#neon-evm-client-client" class="table-of-contents__link">Neon EVM client (client)</a></li><li><a href="#neon-evm-operator-operator" class="table-of-contents__link">Neon EVM operator (operator)</a></li><li><a href="#neon-web3-proxy-proxy" class="table-of-contents__link">Neon Web3 Proxy (proxy)</a></li><li><a href="#neon-evm" class="table-of-contents__link">Neon EVM</a></li><li><a href="#neon-evm-governance-participant" class="table-of-contents__link">Neon EVM governance participant</a></li><li><a href="#erc20-tkn" class="table-of-contents__link">ERC20 TKN</a></li><li><a href="#spl-token" class="table-of-contents__link">SPL token</a></li><li><a href="#solana" class="table-of-contents__link">Solana</a></li><li><a href="#erc20-wrapper" class="table-of-contents__link">ERC20 Wrapper</a></li></ul></li><li><a href="#economic-game-as-a-means-of-stimulating-operators" class="table-of-contents__link">Economic game as a means of stimulating operators</a><ul><li><a href="#how-can-operators-find-out-about-transactions-ready-to-be-continued" class="table-of-contents__link">How can operators find out about transactions ready to be continued?</a></li><li><a href="#special-cases" class="table-of-contents__link">Special cases</a></li></ul></li><li><a href="#transferring-tokens-inside-solana" class="table-of-contents__link">Transferring tokens inside Solana</a><ul><li><a href="#payment-queues" class="table-of-contents__link">Payment queues</a></li></ul></li><li><a href="#transferring-tokens-between-solana-and-ethereum" class="table-of-contents__link">Transferring tokens between Solana and Ethereum</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/d9BhxNWTsj" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://neonlabs.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">NeonLabs.org</a></li><li class="footer__item"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Neon Labs</div></div></div></footer></div>
<script src="/assets/js/runtime~main.24ee2ff4.js"></script>
<script src="/assets/js/main.d027b4ae.js"></script>
</body>
</html>