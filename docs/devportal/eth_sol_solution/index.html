<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Neon EVM Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Neon EVM Docs Blog Atom Feed"><title data-react-helmet="true">Ethereum and Solana capabilities in a single solution | Neon EVM Docs</title><meta data-react-helmet="true" property="og:url" content="https://doc.neonlabs.org/docs/devportal/eth_sol_solution"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Ethereum and Solana capabilities in a single solution | Neon EVM Docs"><meta data-react-helmet="true" name="description" content="This section describes a unique solution that allows Ethereum users to use the key features of Solana and vice versa."><meta data-react-helmet="true" property="og:description" content="This section describes a unique solution that allows Ethereum users to use the key features of Solana and vice versa."><link data-react-helmet="true" rel="shortcut icon" href="/img/neon_logo_colors.png"><link data-react-helmet="true" rel="canonical" href="https://doc.neonlabs.org/docs/devportal/eth_sol_solution"><link data-react-helmet="true" rel="alternate" href="https://doc.neonlabs.org/docs/devportal/eth_sol_solution" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://doc.neonlabs.org/docs/devportal/eth_sol_solution" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d9bfc96a.css">
<link rel="preload" href="/assets/js/runtime~main.e4fa49ff.js" as="script">
<link rel="preload" href="/assets/js/main.c7f5b5b3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Neon Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/devportal/eth_sol_solution">Develop</a><a class="navbar__item navbar__link" href="/docs/software_manuals/foundational_topics/web3">Manuals</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Devportal</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/devportal/eth_sol_solution">Ethereum and Solana capabilities in a single solution</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/neon_evm_arch">Overview of Neon EVM Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/value_token">Transaction Value token as an analogue of ETH for Neon EVM Solutions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/metamask_setup">Installing and setting up MetaMask</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devportal/uniswap">Porting the uniswap service to Neon EVM</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Testnet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Software manuals</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Ethereum and Solana capabilities in a single solution</h1></header><blockquote><p><em>This section describes a unique solution that allows Ethereum users to use the key features of Solana and vice versa.</em></p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="terminology"></a>Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">#</a></h3><ul><li><em>BPF</em> - the Berkley Packet Filter virtual machine</li><li><em>Contract</em> - smart contract</li><li><em>dApp(s)</em> - decentralized application(s)</li><li><em>N-trx</em> - Neon transaction formed according to the Ethereum network rules and executed inside Neon EVM</li><li><em>EVM</em> - the Ethereum Virtual Machine</li><li><em>Proxy</em> - Neon Web3 Proxy</li><li><em>S-trx</em> - transaction formed according to the Solana network rules</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="key-ethereum-capabilities"></a>Key Ethereum capabilities<a class="hash-link" href="#key-ethereum-capabilities" title="Direct link to heading">#</a></h2><p>Ethereumâ€™s core innovation, EVM, is a Turing-complete software that runs on the Ethereum network. EVM enables developers to build and deploy dApps, making the process of creating blockchain applications much easier and efficient. Contracts are treated as autonomous scripts or stateful dApps that are stored in the Ethereum blockchain for execution by the EVM at a later stage.  </p><p>Ethereum has a large number of developer tools (such as <em>Metamask</em>, <em>Remix</em>, <em>Truffle</em>, and others) available in its ecosystem. The toolkit allows users to write dApps in Solidity: the standard language for development of contracts.  </p><p>Ethereum is the flagship of the crypto world. It runs a lot of distributed applications that have proven themselves in the market and are in demand all over the world.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="key-solana-capabilities"></a>Key Solana capabilities<a class="hash-link" href="#key-solana-capabilities" title="Direct link to heading">#</a></h2><p>Solana is an exceptionally fast, secure, and  relatively inexpensive blockchain network.<br>
The Solana blockchain provides:</p><ul><li>High performance, including:<ul><li>Short block processing time.</li><li>Processing of many transactions per second (transactions can be executed in parallel).</li></ul></li><li>Low transaction fees.</li><li>Ability to increase the number of nodes in the network without reducing the performance of the network as a whole.</li><li>Capability to build in coding languages <em>C</em>, <em>C++</em>, <em>Rust</em>.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="goal"></a>Goal<a class="hash-link" href="#goal" title="Direct link to heading">#</a></h2><p>To find a solution that combines the best of both Ethereum and Solana and allows:</p><ul><li>Solana users to use unique Ethereum toolkits to write dApps in Solidity.</li><li>Ethereum dApps to be deployed on Solana, thereby attracting a huge audience of Ethereum users to the Solana blockchain.</li><li>Ethereum users to significantly increase the speed of transactions and reduce the fee charged for their execution by using Solana.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solution-implemented"></a>Solution implemented<a class="hash-link" href="#solution-implemented" title="Direct link to heading">#</a></h2><p>To achieve the goal, the following solution was proposed and implemented by the NeonLabs development team:</p><ul><li>EVM was integrated in Solana and named Neon EVM: an emulator implemented using Rust.</li><li>Neon EVM operates inside Solana providing parallel transaction processing and a low transaction fee.</li><li>The Neon Web3 Proxy was created to mediate interactions between the Ethereum user (account) and the Neon EVM; the main function of the proxy is to provide an API for external clients.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="solution-in-detail"></a>Solution in detail<a class="hash-link" href="#solution-in-detail" title="Direct link to heading">#</a></h2><p>The block diagram of the solution is shown in Fig. 1.  </p><p align="center"></p><p><img src="/assets/images/neon-evm-1-93236da2993f1f61c8dcb07e6cb5a822.png"><br>
Fig. 1 </p>  <p></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="berkeley-packet-filter"></a>Berkeley Packet Filter<a class="hash-link" href="#berkeley-packet-filter" title="Direct link to heading">#</a></h3><p>The BPF virtual machine is installed in Solana, allowing developers to embed other virtual machines inside Solana.  </p><p>Using BPF capabilities, a contract called Neon EVM was created in Solana, inside of which the EVM was loaded.  </p><p>Because Solana has a contract update mechanism, the Neon EVM contract can also be updated independently of updates of the Solana node itself. This allows developers to update EVM versions without updating all the blockchain nodes.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-web3-proxy"></a>Neon Web3 Proxy<a class="hash-link" href="#neon-web3-proxy" title="Direct link to heading">#</a></h3><p>A user is allowed to form transactions under an Ethereum account and sign them with a public key generated in Ethereum. Transactions formed according to Ethereum rules are sent to the input of the Proxy component. This component converts <em>N-trxs</em> into transactions under Solana rules.  </p><p>The size of <em>N-trx</em>  can exceed that of <em>S-trx</em>. Also, the amount of resources that a <em>S-trx</em> can spend is limited. Converting a transaction in a one-to-one format is difficult due to the possible lack of resources. Therefore, it was decided to generate multiple <em>S-trxs</em> for one <em>N-trx</em>.
Each transaction generated is signed with a proxy key. The proxy sends the generated batch of transactions to Solana.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="web3-api"></a>Web3 API<a class="hash-link" href="#web3-api" title="Direct link to heading">#</a></h3><p>The proxy provides the full Web3 API to interact with external clients. In Ethereum, some contracts work at the blockchain level, and there is also an API that is supported by an Ethereum node. Clients that are created for Ethereum contracts support standard interfaces. For a client (i.e. Metamask, Remix) to work in a web browser, it must work via the Web3 API. With Neon EVM, Ethereum dApps can be deployed on Solana without any edits to the source code or recompilation: dApps look and function exactly the same.  </p><p>Clients will work on a different blockchain if they are provided with the same interface. You can do this by changing the address where these clients need to go. Ethereum contracts and clients do not need to be rewritten to work in Solana, you just need to register the proxy address. Any client can run a proxy to deploy a contract inside Solana. The interface that the clients interact with will be the same as for dApps running on Ethereum.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="neon-evm"></a>Neon EVM<a class="hash-link" href="#neon-evm" title="Direct link to heading">#</a></h3><p>Solana runs BPF, inside of which runs Neon EVM. Neon EVM is a Solana contract, so it recognizes the transaction format from the received batch. Neon EVM extracts data from each transaction and thus can retrieve all the original user information placed in the transaction.  </p><p>Neon EVM also validates the signature that is in the transaction. If the signature is authentic, Neon EVM takes the contract code to which this transaction is addressed and starts to execute it. As soon as the contract code has been executed successfully, Neon EVM records a new state.  </p><p>For example, if the transaction is a token transfer, the contract code sends tokens from one account to another. Neon EVM simply records this new state.  </p><p>The user can also form a transaction to load a contract inside Neon EVM. In this case, the contract code will be written for Ethereum. A bytecode of this contract code will be loaded inside Neon EVM. That is, the contract itself and its data will be stored inside Solana.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="account-data-storage"></a>Account data storage<a class="hash-link" href="#account-data-storage" title="Direct link to heading">#</a></h3><p>Solana stores account data. Neon EVM has access to this storage and uses the account data. After registering an account in Solana, the account data is placed in this storage. Ethereum accounts are also stored here but in the Solana representation. For each Ethereum address, there is a corresponding account in the Solana representation. A contract code is placed in a corresponding account of this storage. </p><p>Neon EVM interacts with a set of data that is stored on Solana&#x27;s accounts. Neon EVM can take a contract code from there using the corresponding account address to validate a transaction. Neon EVM contains a virtual machine inside it that runs according to Ethereum rules.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-neon-works"></a>How Neon works<a class="hash-link" href="#how-neon-works" title="Direct link to heading">#</a></h2><p>A user calls a client that generates a transaction and sends it to the proxy, inside which the Neon EVM emulator runs (Fig. 2). The transaction is formed in accordance with the Ethereum rules and contains mandatory fields, including:</p><ul><li><strong>Nonce</strong>: number of transactions sent from the current address.</li><li><strong>Signature</strong>: generated in accordance with the Ethereum rules.</li><li><strong>Gas price</strong>: fee the sender pays per unit of gas.</li><li><strong>Gas limit</strong>: maximum amount of gas units that can be consumed by the transaction.</li><li><strong>Value</strong>: amount of coins to transfer from sender to a recipient.</li><li><strong>Recipient</strong>: address of the recipient.</li></ul><p align="center"></p><p><img src="/assets/images/neon-evm-2-70c182d1c893f06d02b5ba6118d5dde6.png"><br>
Fig. 2 </p>  <p></p><p>To perform this transaction, the Neon EVM emulator makes a request to Solana to get state data.
The proxy requests a blockchain state from Solana and makes a test launch of <em>N-trx</em> using the Solana state. On the basis of the data received, Proxy forms the new transaction according to Solana&#x27;s rules. The transaction generated for Solana will contain the packaged <em>N-trx</em>, as well as the account data required to complete the transaction, including: </p><ul><li>Payer (the account that pays for the transaction).</li><li>Other accounts involved in the execution of this transaction.  </li></ul><p>Next, the transaction is forwarded inside Solana, where participants of the transaction are determined according to the account data. The data added includes details about people who initiate and take part in processing the transaction. The operator of the proxy is specified as the <em>payer</em>. The <em>payer</em> will be rewarded for completing the transaction.  </p><p>Next, the transaction is transferred to Neon EVM, where its signature is checked according to Ethereum rules. If the signature is valid, the transaction will be transferred to the Solana blockchain for execution. Since testing of <em>N-trx</em> is carried out, it is possible to provide Solana with all the necessary information to run the execution of the <em>N-trx</em> in parallel.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>Neon&#x27;s solution offers:</p><ul><li>No changes or additional resources are required to implement dApps on Solana.</li><li>No need to rewrite clients for all existing dApps, since the Ethereum node interface remains unchanged, and therefore clients can run on the Solana node also without changes.</li><li>No need to rewrite contracts for existing dApps.</li><li>Solana developers are given the opportunity to:<ul><li>Use a unique toolkit created for Ethereum.</li><li>Create and deploy their contracts on the Solana network.</li></ul></li><li>Unlike Ethereum, the Neon EVM can be updated at any time, this means that new functionality can be added at any time and code updates can take place simply by uploading them as a new smart contract.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/neonlabsorg/neon-evm.docs/docs/devportal/eth_sol_solution.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/glossary"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Terminology</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/devportal/neon_evm_arch"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview of Neon EVM Architecture Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#terminology" class="table-of-contents__link">Terminology</a></li><li><a href="#key-ethereum-capabilities" class="table-of-contents__link">Key Ethereum capabilities</a></li><li><a href="#key-solana-capabilities" class="table-of-contents__link">Key Solana capabilities</a></li><li><a href="#goal" class="table-of-contents__link">Goal</a></li><li><a href="#solution-implemented" class="table-of-contents__link">Solution implemented</a></li><li><a href="#solution-in-detail" class="table-of-contents__link">Solution in detail</a><ul><li><a href="#berkeley-packet-filter" class="table-of-contents__link">Berkeley Packet Filter</a></li><li><a href="#neon-web3-proxy" class="table-of-contents__link">Neon Web3 Proxy</a></li><li><a href="#web3-api" class="table-of-contents__link">Web3 API</a></li><li><a href="#neon-evm" class="table-of-contents__link">Neon EVM</a></li><li><a href="#account-data-storage" class="table-of-contents__link">Account data storage</a></li></ul></li><li><a href="#how-neon-works" class="table-of-contents__link">How Neon works</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/d9BhxNWTsj" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://neonlabs.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">NeonLabs.org</a></li><li class="footer__item"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Solana Foundation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e4fa49ff.js"></script>
<script src="/assets/js/main.c7f5b5b3.js"></script>
</body>
</html>