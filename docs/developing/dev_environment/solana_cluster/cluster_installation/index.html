<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="Neon Docs" href="/opensearch.xml"><title data-react-helmet="true">Setting Up the Local Neon EVM Environment | Neon Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://doc.neonlabs.org/img/og_image.png"><meta data-react-helmet="true" name="twitter:image" content="https://doc.neonlabs.org/img/og_image.png"><meta data-react-helmet="true" property="og:url" content="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Setting Up the Local Neon EVM Environment | Neon Docs"><meta data-react-helmet="true" name="description" content="This step-by-step guide describes how to install, configure, and test the local Solana cluster with Neon EVM onboard. It will help new developers create their own environment and run Ethereum programs wrapped into the Neon EVM."><meta data-react-helmet="true" property="og:description" content="This step-by-step guide describes how to install, configure, and test the local Solana cluster with Neon EVM onboard. It will help new developers create their own environment and run Ethereum programs wrapped into the Neon EVM."><link data-react-helmet="true" rel="shortcut icon" href="/img/fav_192.png"><link data-react-helmet="true" rel="canonical" href="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation"><link data-react-helmet="true" rel="alternate" href="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BWG2PNCWQK-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.db30ed73.css">
<link rel="preload" href="/assets/js/runtime~main.f47c7e83.js" as="script">
<link rel="preload" href="/assets/js/main.7c738fdf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Neon Docs</b></a><a class="navbar__item navbar__link" href="/docs/developing/getting_started">Develop</a><a class="navbar__item navbar__link" href="/docs/operating/operator_guide">Operate</a><a class="navbar__item navbar__link" href="/docs/architecture/neon_evm_arch">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Wallets</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Explorers</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tokens Transferring</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Developing</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developing/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Setting up Environment</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developing/dev_environment/choosing_proxy">Choosing a Neon Proxy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developing/dev_environment/connect_to_solana_via_proxy">Connecting to the Neon Proxy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developing/dev_environment/solana_cluster/cluster_installation">Local Neon EVM environment</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Deploying dApps</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Using utilities</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Operating</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Governance</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Environment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Setting Up the Local Neon EVM Environment</h1></header><p><em>This step-by-step guide describes how to install, configure, and test the local Solana cluster with Neon EVM onboard. It will help new developers create their own environment and run Ethereum programs wrapped into the Neon EVM.</em></p><p>The <a href="https://neon-labs.org/" target="_blank" rel="noopener noreferrer">Neon EVM</a> is a solution that performs transaction execution outside layer 1. The development process can be run on any modern Linux or Mac system, though this document is based on an Ubuntu 20.04 experience.</p><p>All the services in the <strong><code>Neon EVM environment</code></strong> presented by the docker-compose configuration files can be interchangeably substituted with their experimental versions in order to develop and test each service independently. To resolve issues, the Neon engineer has to be able to replace any service with a customized one according to the current requirements. You are welcome to change the following <code>docker-compose</code> configuration files based on your needs. Also, you can bring them altogether in a single docker-compose file, it is important to provide dependencies according to the following sequence.</p><p>Before you start to build your local environment, make sure you have all the <a href="#prerequisites">prerequisites</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><ul><li><strong>Docker</strong> â€” for docker installation, please follow instructions at: <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/ubuntu/</a></li><li><strong>Docker Compose</strong> â€” Docker Compose is required to start up containers at: <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install/</a></li><li><strong>Solana Tool Suite</strong> â€” for interaction with Solana, we need to install Solana CLI Tools: <a href="https://docs.solana.com/ru/cli/install-solana-cli-tools" target="_blank" rel="noopener noreferrer">https://docs.solana.com/ru/cli/install-solana-cli-tools</a></li><li>A Chromium-based <strong>browser</strong> â€” for <a href="https://metamask.io/" target="_blank" rel="noopener noreferrer">MetaMask</a> and <a href="https://remix.ethereum.org/" target="_blank" rel="noopener noreferrer">Remix</a></li></ul><ul><li><strong>Node package manager</strong> â€” <a href="https://www.w3schools.com/nodejs/nodejs_npm.asp" target="_blank" rel="noopener noreferrer">Node.js/npm</a> to interact with he Neon EVM with <a href="https://www.npmjs.com/package/web3" target="_blank" rel="noopener noreferrer">Web3</a> and <a href="https://www.npmjs.com/package/web3-eth" target="_blank" rel="noopener noreferrer">Eth</a> modules.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="setting-up-the-neon-local-workspace-environment"></a>Setting up the Neon Local Workspace Environment<a class="hash-link" href="#setting-up-the-neon-local-workspace-environment" title="Direct link to heading">#</a></h2><p>Currently, the most flexible way is to use the set of independent docker containers sharing the common external network. To create the network called <strong><code>local</code></strong> that will be used over the docker containers, just input the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">docker network create </span><span class="token builtin class-name">local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you want to bind some ports from the service to the host machine to be able to connect them and work with a service independently, just extend a <code>docker-compose.yml</code> configurations with the <code>ports</code> instruction. For example, you can bind the Solana (8899, 8900)- or Proxy (9090)-related ports to the host machine this way.</p><p>After establishing the local network, it&#x27;s time to start the following containers:</p><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>1. Solana validator service</summary><div><div class="collapsibleContent_3OHp"><p>This service presents the Solana validator running inside the container</p><p>Once you deploy the environment, you&#x27;ll have the Solana RPC endpoint working from the docker container at the 9090 port. The folder named &quot;solana_state&quot; will be created as well. It contains the Solana ledger to keep the state over restarts. If you need to reset the ledger, just remove this folder and it&#x27;ll be recreated the next time you run docker-compose.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="docker-composeyml"></a>docker-compose.yml<a class="hash-link" href="#docker-composeyml" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    version: &quot;3&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    services:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      solana:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        container_name: solana</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: neonlabsorg/solana:${SOLANA_REVISION:-v1.9.12-testnet}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          SOLANA_URL: http://solana:8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          RUST_LOG: solana_runtime::system_instruction_processor=trace,solana_runtime::message_processor=debug,solana_bpf_loader=debug,solana_rbpf=debug</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        expose:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          - 8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          - 8900</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        healthcheck:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          test: [ CMD-SHELL, &quot;solana cluster-version -u http://solana:8899&quot; ]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          interval: 5s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          timeout: 10s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          retries: 10</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          start_period: 10s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        volumes:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          - &quot;./solana_state:/opt/solana/config/&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      net:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        external: yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="how-to-run-it-in-bash"></a>How to run it in bash<a class="hash-link" href="#how-to-run-it-in-bash" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f solana/docker-compose.yml pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f solana/docker-compose.yml up -d</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>2. EVM loader service</summary><div><div class="collapsibleContent_3OHp"><p>This container helps deploy the Neon EVM base contract onto Solana that listens for incoming connections on the port 8899</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="docker-composeyml-1"></a>docker-compose.yml<a class="hash-link" href="#docker-composeyml-1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  evm_loader:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: evm_loader</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/evm_loader:latest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=http://solana:8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: bash -c &quot;create-test-accounts.sh 1 &amp;&amp; deploy-evm.sh&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="how-to-run-it-in-bash-1"></a>How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">   $ docker-compose -f evm-loader/docker-compose.yml pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   $ docker-compose -f evm-loader/docker-compose.yml up</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>3. Database services</summary><div><div class="collapsibleContent_3OHp"><p>This container aims to handle the database that stores all the relevant Ethereum processing metadata linked to each other: <strong><code>transactions</code></strong>, <strong><code>blocks</code></strong>, <strong><code>receipts</code></strong>, <strong><code>accounts</code></strong> etc. This data is consumed by the <strong>indexer</strong> service.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="docker-composeyml-2"></a>docker-compose.yml<a class="hash-link" href="#docker-composeyml-2" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  postgres:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: postgres</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: postgres:14.0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: postgres -c &#x27;max_connections=1000&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_DB: neon-db</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_USER: neon-proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_PASSWORD: neon-proxy-pass</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    hostname: postgres</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    healthcheck:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      test: [ CMD-SHELL, &quot;pg_isready -h postgres -p 5432&quot; ]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      interval: 5s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout: 10s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      retries: 10</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      start_period: 5s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;127.0.0.1:5432:5432&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    expose:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;5432&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbcreation:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: dbcreation</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/proxy:latest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      SOLANA_URL: http://solana:8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_DB: neon-db</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_USER: neon-proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_PASSWORD: neon-proxy-pass</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_HOST: postgres</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: proxy/run-dbcreation.sh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    depends_on:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      postgres:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition: service_healthy</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="how-to-run-it-in-bash-2"></a>How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-2" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f postgres/docker-compose.yml pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f postgres/docker-compose.yml up -d</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>4. Indexer service</summary><div><div class="collapsibleContent_3OHp"><p>The indexer service indexes all the relevant Ethereum processing metadata consisting of <strong><code>signatures</code></strong>, <strong><code>transactions</code></strong>, <strong><code>blocks</code></strong>, <strong><code>receipts</code></strong>, <strong><code>accounts</code></strong>, etc. It gathers all this data from the Solana blockchain, filtering them by the EVM contract address. It also makes it possible to provide our users with the Ethereum API according to the data provided by the whole known operators.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="docker-composeyml-3"></a>docker-compose.yml<a class="hash-link" href="#docker-composeyml-3" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  indexer:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: indexer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/proxy:latest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      SOLANA_URL: http://solana:8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_DB: neon-db</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_USER: neon-proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_HOST: postgres</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_PASSWORD: neon-proxy-pass</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      CONFIG: ci</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      START_SLOT: LATEST</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    hostname: indexer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: proxy/run-indexer.sh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="how-to-run-it-in-bash-3"></a>How To Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-3" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f indexer/docker-compose.yml pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f indexer/docker-compose.yml up -d</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>5. Proxy service</summary><div><div class="collapsibleContent_3OHp">The Proxy service is a core service that allows Ethereum-like transactions to be processed on [Solana](https://docs.solana.com/introduction), taking full advantage of the functionality native to Solana, including the ability to execute transactions in parallel. It&#x27;s available on 9090 port.<h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="docker-composeyml-4"></a>docker-compose.yml<a class="hash-link" href="#docker-composeyml-4" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  proxy:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/proxy:latest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_DB=neon-db</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_USER=neon-proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_PASSWORD=neon-proxy-pass</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_HOST=postgres</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=http://solana:8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EXTRA_GAS=5000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EVM_LOADER=53DfF883gyixYNXnM7s5xhdeyV8mVk9T4i2hGV9vG9io</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - CONFIG=ci</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - LOG_NEON_CLI_DEBUG=YES</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - USE_COMBINED_START_CONTINUE=yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEON_CLI_TIMEOUT=60</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEW_USER_AIRDROP_AMOUNT=0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - WRITE_TRANSACTION_COST_IN_DB=NO</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - START_SLOT=LATEST</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - PERM_ACCOUNT_LIMIT=16</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    hostname: proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: ./proxy/run-proxy.sh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;9090:9090&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    expose:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;9090&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="how-to-run-it-in-bash-4"></a>How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-4" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f proxy/docker-compose.yml pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f proxy/docker-compose.yml up -d</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>6. Faucet service</summary><div><div class="collapsibleContent_3OHp">The Faucet service provides the liquidity in `NEON` to all the accounts that are mentioned in the incoming requests.<h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="docker-composeyml-5"></a>docker-compose.yml<a class="hash-link" href="#docker-composeyml-5" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  faucet:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: faucet</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/faucet:latest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_RPC_BIND=0.0.0.0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_RPC_PORT=3333</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=http://solana:8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEON_ETH_MAX_AMOUNT=50000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EVM_LOADER=53DfF883gyixYNXnM7s5xhdeyV8mVk9T4i2hGV9vG9io</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_RPC_ALLOWED_ORIGINS=[&quot;https://neonswap.live&quot;]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_WEB3_ENABLE=false</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_SOLANA_ENABLE=true</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEON_OPERATOR_KEYFILE=/opt/faucet/id.json</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_COMMITMENT=confirmed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: /opt/faucet/faucet --config /opt/proxy/faucet.conf run</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - 3333:3333</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    expose:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;3333&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="how-to-run-it-in-bash-5"></a>How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-5" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f faucet/docker-compose.yml pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f faucet/docker-compose.yml up -d</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>7. Full test suite service</summary><div><div class="collapsibleContent_3OHp"><p>The full test suite provides in general the <a href="https://docs.openzeppelin.com/learn/writing-automated-tests" target="_blank" rel="noopener noreferrer">OpenZeppelin tests</a> to make sure the infrastructure deployed by this guide works properly. At the end, the <code>full test suite</code> outputs the result in the following form:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Full test passing - 1743</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Full test threshold - 1700</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Check if 1743 is greater or equal 1700</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="full_test_suitedocker-composeyml"></a>full_test_suite/docker-compose.yml<a class="hash-link" href="#full_test_suitedocker-composeyml" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  full_test_suite:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: ${FTS_CONTAINER_NAME:-full_test_suite}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: ${FTS_IMAGE:-neonlabsorg/full_test_suite:develop}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: ./run-full-test-suite.sh 2&gt;/dev/null</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NETWORK_NAME=${NETWORK_NAME}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - PROXY_URL=${PROXY_URL}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NETWORK_ID=${NETWORK_ID}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - REQUEST_AMOUNT=${REQUEST_AMOUNT}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_URL=${FAUCET_URL}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - USE_FAUCET=${USE_FAUCET}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=${SOLANA_URL}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FTS_USERS_NUMBER=${FTS_USERS_NUMBER}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FTS_JOBS_NUMBER=${FTS_JOBS_NUMBER}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="full_test_suitelocalenv"></a>full_test_suite/local.env<a class="hash-link" href="#full_test_suitelocalenv" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">NETWORK_NAME=local</span></span><span class="token-line" style="color:#393A34"><span class="token plain">PROXY_URL=http://proxy:9090/solana</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NETWORK_ID=111</span></span><span class="token-line" style="color:#393A34"><span class="token plain">REQUEST_AMOUNT=20000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FAUCET_URL=http://faucet:3333/request_neon</span></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_FAUCET=true</span></span><span class="token-line" style="color:#393A34"><span class="token plain">SOLANA_URL=http://solana:8899</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FTS_USERS_NUMBER=15</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FTS_JOBS_NUMBER=8</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="how-to-run-it-in-bash-6"></a>How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-6" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f full_test_suite/docker-compose.yml pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f full_test_suite/docker-compose.yml --env-file full_test_suite/local.env up</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="logs"></a>Logs<a class="hash-link" href="#logs" title="Direct link to heading">#</a></h2><p>After following the previous steps, you will have four running containers for the Neon EVM local environment: <strong>solana</strong>, <strong><code>postgres</code></strong>, <strong><code>proxy</code></strong>, <strong><code>indexer</code></strong>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">49c864f47ccd   neonlabsorg/solana:v1.9.12-testnet   &quot;./run.sh&quot;               About an hour ago   Up About an hour (healthy)   8003/udp, 0.0.0.0:8899-8900-&gt;8899-8900/tcp, :::8899-8900-&gt;8899-8900/tcp, 9900/tcp   solana</span></span><span class="token-line" style="color:#393A34"><span class="token plain">92f6b4492894   neonlabsorg/proxy:latest             &quot;./proxy/run-proxy.sh&quot;   46 hours ago        Up About an hour             0.0.0.0:9090-&gt;9090/tcp, :::9090-&gt;9090/tcp                                           proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">932d4d860629   neonlabsorg/proxy:latest             &quot;proxy/run-indexer.sh&quot;   46 hours ago        Up About an hour             9090/tcp                                                                            indexer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">5a7df37069fc   postgres:14.0                        &quot;docker-entrypoint.sâ€¦&quot;   47 hours ago        Up About an hour (healthy)   127.0.0.1:5432-&gt;5432/tcp                                                            postgres</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To look for events or errors, just run the <code>docker logs</code> for either the <code>solana</code> or <code>proxy</code> container:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker logs -f solana 2&gt;&amp;1 | grep -v &quot;Program Vote111111111111111111111111111111111111111&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker logs -f proxy</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="remix-and-metamask-with-the-neon-evm"></a>Remix and MetaMask with the Neon EVM<a class="hash-link" href="#remix-and-metamask-with-the-neon-evm" title="Direct link to heading">#</a></h2><p>Set up the &quot;MetaMask&quot; Chromium extension to connect to the proxy via Custom RPC at <code>http://localhost:9090/solana</code>. The following image describes how to set up the local Solana connection:  </p><div class="neon-img-box-300" style="text-align:center"><p><img src="/assets/images/cluster-install-1-2a934237b77806464af491c468c92f13.png"></p></div><p>Note: Once you create or import a new account in MetaMask, some NEONs will be airdropped into it.</p><p>Open Remix (also in Chromium) and select <code>Injected Web3</code> environment. You can deploy EVM-wrapped smart contracts on Solana and input these instructions:  </p><div class="neon-img-box-300" style="text-align:center"><p><img src="/assets/images/cluster-install-2-0e37ce12c2afc407dcdd02b669044898.png"></p></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="truffle-suite-with-neon-evm"></a>Truffle Suite with Neon EVM<a class="hash-link" href="#truffle-suite-with-neon-evm" title="Direct link to heading">#</a></h2><p>Truffle is a popular platform to deploy and test Solidity programs. This section shows you how to check the compatibility of the Neon EVM and the Truffle suite.</p><p>In the new terminal, create a Truffle project and deploy contracts into EVM:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo npm install -g truffle</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir myproject &amp;&amp; cd myproject</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ truffle init</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ npm install web3 @truffle/hdwallet-provider</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="common-truffle-settings"></a>Common Truffle Settings<a class="hash-link" href="#common-truffle-settings" title="Direct link to heading">#</a></h3><p>Put your <code>truffle-config.js</code> into the Truffle root:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;const Web3 = require(&quot;web3&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const Web3eth = require(&quot;web3-eth&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const HDWalletProvider = require(&quot;@truffle/hdwallet-provider&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const web3eth = new Web3eth();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const accs = Array.from(Array(10), (_, x) =&gt; web3eth.accounts.create());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const privateKeys = accs.map((account) =&gt; account.privateKey);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  networks: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    solana: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      provider: new HDWalletProvider(privateKeys, &quot;http://127.0.0.1:9090/solana&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      from: accs[0].publicKey,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      network_id: &quot;111&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      gas: 3000000,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      gasPrice: 1000000000,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  compilers: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    solc: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      version: &quot;0.8.9&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};&#x27; &gt; truffle-config.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="contract-creation"></a>Contract Creation<a class="hash-link" href="#contract-creation" title="Direct link to heading">#</a></h3><p>Create a trivial contract at <code>contracts/Storage.sol</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;// SPDX-License-Identifier: GPL-3.0</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity &gt;=0.7.0 &lt;0.9.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract Storage {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function put(uint256 num) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        number = num;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function get() public view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27; &gt; contracts/Storage.sol</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="testing"></a>Testing<a class="hash-link" href="#testing" title="Direct link to heading">#</a></h3><p>You can now start testing <code>Storage</code> invocations with Truffle facility:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;const Storage = artifacts.require(&quot;Storage&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract(&quot;Storage&quot;, (accounts) =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    let storage;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    beforeEach(async () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        storage = await Storage.new();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    it(&quot;should store a value&quot;, async () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        const setResult = await storage.put(248);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        assert.equal(setResult.receipt.status, true);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        const value = await storage.get();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        assert.equal(value, 248);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">})&#x27; &gt; test/Storage.test.js</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ truffle test test/Storage.test.js --network solana</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="possible-problems"></a>Possible Problems<a class="hash-link" href="#possible-problems" title="Direct link to heading">#</a></h3><p>If for some reasons you remove the Solana container and run it again, then all related accounts stored in foreign systems get invalid from that moment. That&#x27;s why you need to re-run the proxy container and reset the state of MetaMask and Truffle as well, to make all relations consistent.</p><p>To reset the MetaMask state, follow the steps at <code>Settings</code>, <code>Advanced</code>, <code>Reset Account</code>.</p><p>The Truffle state can be reset by redeploying it in the following way:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ truffle compile --network solana --reset</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><p><em>Deploy your Solidity programs on the <a href="https://solana.com" target="_blank" rel="noopener noreferrer">Solana</a>-driven <a href="https://neon-labs.org/" target="_blank" rel="noopener noreferrer">Neon EVM</a></em>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/developing/dev_environment/connect_to_solana_via_proxy"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Connecting to the Neon Proxy</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/developing/deploy_facilities/using_remix"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using Remix Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#setting-up-the-neon-local-workspace-environment" class="table-of-contents__link">Setting up the Neon Local Workspace Environment</a></li><li><a href="#logs" class="table-of-contents__link">Logs</a></li><li><a href="#remix-and-metamask-with-the-neon-evm" class="table-of-contents__link">Remix and MetaMask with the Neon EVM</a></li><li><a href="#truffle-suite-with-neon-evm" class="table-of-contents__link">Truffle Suite with Neon EVM</a><ul><li><a href="#common-truffle-settings" class="table-of-contents__link">Common Truffle Settings</a></li><li><a href="#contract-creation" class="table-of-contents__link">Contract Creation</a></li><li><a href="#testing" class="table-of-contents__link">Testing</a></li><li><a href="#possible-problems" class="table-of-contents__link">Possible Problems</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/about/introduction">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/d9BhxNWTsj" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://neonlabs.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">NeonLabs.org</a></li><li class="footer__item"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Neon Labs</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f47c7e83.js"></script>
<script src="/assets/js/main.7c738fdf.js"></script>
</body>
</html>