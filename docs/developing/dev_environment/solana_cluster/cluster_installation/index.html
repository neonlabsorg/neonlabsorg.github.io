<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developing/dev_environment/solana_cluster/cluster_installation">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="Neon Docs" href="/opensearch.xml"><title data-rh="true">Setting Up the Local Neon EVM Environment | Neon Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doc.neonlabs.org/img/og_image.png"><meta data-rh="true" name="twitter:image" content="https://doc.neonlabs.org/img/og_image.png"><meta data-rh="true" property="og:url" content="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Setting Up the Local Neon EVM Environment | Neon Docs"><meta data-rh="true" name="description" content="This step-by-step guide describes how to install, configure, and test the local Solana cluster with Neon EVM onboard. It will help new developers create their own environment and run Ethereum programs wrapped into the Neon EVM."><meta data-rh="true" property="og:description" content="This step-by-step guide describes how to install, configure, and test the local Solana cluster with Neon EVM onboard. It will help new developers create their own environment and run Ethereum programs wrapped into the Neon EVM."><link data-rh="true" rel="icon" href="/img/fav_192.png"><link data-rh="true" rel="canonical" href="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation"><link data-rh="true" rel="alternate" href="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.neonlabs.org/docs/developing/dev_environment/solana_cluster/cluster_installation" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BWG2PNCWQK-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.86974bdc.css">
<link rel="preload" href="/assets/js/runtime~main.dcbbc947.js" as="script">
<link rel="preload" href="/assets/js/main.af0b25c5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/neon-logo.png" alt="Neon EVM" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Neon Docs</b></a><a class="navbar__item navbar__link" href="/docs/developing/getting_started">Develop</a><a class="navbar__item navbar__link" href="/docs/operating/operator_guide">Operate</a><a class="navbar__item navbar__link" href="/docs/architecture/neon_evm_arch">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about/introduction">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wallet/metamask_setup">Wallets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://neonscan.org/" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false">Explorers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/token_transferring/neonpass_overview">Tokens Transferring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/developing/getting_started">Developing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developing/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/developing/dev_environment/choosing_proxy">Setting up Environment</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developing/dev_environment/choosing_proxy">Choosing a Neon Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developing/dev_environment/connect_to_solana_via_proxy">Connecting to the Neon Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developing/dev_environment/solana_cluster/cluster_installation">Local Neon EVM environment</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/developing/deploy_facilities/using_remix">Deploying dApps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://neonscan.org/" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0">Using utilities</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/operating/operator_requirements">Operating</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/governance/governance_overview">Governance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/clusters/solana_cluster">Environment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/architecture/neon_evm_arch">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/faq/what-is-neon">FAQ</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Developing</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Setting up Environment</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Local Neon EVM environment</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Setting Up the Local Neon EVM Environment</h1></header><p><em>This step-by-step guide describes how to install, configure, and test the local Solana cluster with Neon EVM onboard. It will help new developers create their own environment and run Ethereum programs wrapped into the Neon EVM.</em></p><p>The <a href="https://neon-labs.org/" target="_blank" rel="noopener noreferrer">Neon EVM</a> is a solution that performs transaction execution outside layer 1. The development process can be run on any modern Linux or Mac system, though this document is based on an Ubuntu 20.04 experience.</p><p>All the services in the <strong><code>Neon EVM environment</code></strong> presented by the docker-compose configuration files can be interchangeably substituted with their experimental versions in order to develop and test each service independently. To resolve issues, the Neon engineer has to be able to replace any service with a customized one according to the current requirements. You are welcome to change the following <code>docker-compose</code> configuration files based on your needs. Also, you can bring them altogether in a single docker-compose file, it is important to provide dependencies according to the following sequence.</p><p>Before you start to build your local environment, make sure you have all the <a href="#prerequisites">prerequisites</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><ul><li><strong>Docker</strong> — for docker installation, please follow instructions at: <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/ubuntu/</a></li><li><strong>Docker Compose</strong> — Docker Compose is required to start up containers at: <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install/</a></li><li><strong>Solana Tool Suite</strong> — for interaction with Solana, we need to install Solana CLI Tools: <a href="https://docs.solana.com/ru/cli/install-solana-cli-tools" target="_blank" rel="noopener noreferrer">https://docs.solana.com/ru/cli/install-solana-cli-tools</a></li><li>A Chromium-based <strong>browser</strong> — for <a href="https://metamask.io/" target="_blank" rel="noopener noreferrer">MetaMask</a> and <a href="https://remix.ethereum.org/" target="_blank" rel="noopener noreferrer">Remix</a></li></ul><ul><li><strong>Node package manager</strong> — <a href="https://www.w3schools.com/nodejs/nodejs_npm.asp" target="_blank" rel="noopener noreferrer">Node.js/npm</a> to interact with he Neon EVM with <a href="https://www.npmjs.com/package/web3" target="_blank" rel="noopener noreferrer">Web3</a> and <a href="https://www.npmjs.com/package/web3-eth" target="_blank" rel="noopener noreferrer">Eth</a> modules.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="setting-up-the-neon-local-workspace-environment">Setting up the Neon Local Workspace Environment<a class="hash-link" href="#setting-up-the-neon-local-workspace-environment" title="Direct link to heading">​</a></h2><p>Currently, the most flexible way is to use the set of independent docker containers sharing the common external network. To create the network called <strong><code>local</code></strong> that will be used over the docker containers, just input the following command:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> network create </span><span class="token builtin class-name">local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>If you want to bind some ports from the service to the host machine to be able to connect them and work with a service independently, just extend a <code>docker-compose.yml</code> configurations with the <code>ports</code> instruction. For example, you can bind the Solana (8899, 8900)- or Proxy (9090)-related ports to the host machine this way.</p><p>After establishing the local network, it&#x27;s time to start the following containers:</p><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>1. Solana validator service</summary><div><div class="collapsibleContent_i85q"><p>This service presents the Solana validator running inside the container</p><p>Once you deploy the environment, you&#x27;ll have the Solana RPC endpoint working from the docker container at the 9090 port. The folder named &quot;solana_state&quot; will be created as well. It contains the Solana ledger to keep the state over restarts. If you need to reset the ledger, just remove this folder and it&#x27;ll be recreated the next time you run docker-compose.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="docker-composeyml">docker-compose.yml<a class="hash-link" href="#docker-composeyml" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">    version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      solana:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        container_name: solana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: neonlabsorg/solana:${SOLANA_REVISION:-v1.9.12-testnet}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          SOLANA_URL: http://solana:8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          RUST_LOG: solana_runtime::system_instruction_processor=trace,solana_runtime::message_processor=debug,solana_bpf_loader=debug,solana_rbpf=debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        expose:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - 8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - 8900</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        healthcheck:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          test: [ CMD-SHELL, &quot;solana cluster-version -u http://solana:8899&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          interval: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          timeout: 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          retries: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          start_period: 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - &quot;./solana_state:/opt/solana/config/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        external: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-it-in-bash">How to run it in bash<a class="hash-link" href="#how-to-run-it-in-bash" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f solana/docker-compose.yml pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f solana/docker-compose.yml up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></details><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>2. EVM loader service</summary><div><div class="collapsibleContent_i85q"><p>This container helps deploy the Neon EVM base contract onto Solana that listens for incoming connections on the port 8899</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="docker-composeyml-1">docker-compose.yml<a class="hash-link" href="#docker-composeyml-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  evm_loader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: evm_loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/evm_loader:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=http://solana:8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: bash -c &quot;create-test-accounts.sh 1 &amp;&amp; deploy-evm.sh&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-it-in-bash-1">How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">   $ docker-compose -f evm-loader/docker-compose.yml pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   $ docker-compose -f evm-loader/docker-compose.yml up</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></details><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>3. Database services</summary><div><div class="collapsibleContent_i85q"><p>This container aims to handle the database that stores all the relevant Ethereum processing metadata linked to each other: <strong><code>transactions</code></strong>, <strong><code>blocks</code></strong>, <strong><code>receipts</code></strong>, <strong><code>accounts</code></strong> etc. This data is consumed by the <strong>indexer</strong> service.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="docker-composeyml-2">docker-compose.yml<a class="hash-link" href="#docker-composeyml-2" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  postgres:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: postgres:14.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: postgres -c &#x27;max_connections=1000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_DB: neon-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_USER: neon-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_PASSWORD: neon-proxy-pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hostname: postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    healthcheck:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      test: [ CMD-SHELL, &quot;pg_isready -h postgres -p 5432&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      interval: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout: 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      retries: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      start_period: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;127.0.0.1:5432:5432&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expose:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;5432&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbcreation:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: dbcreation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/proxy:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SOLANA_URL: http://solana:8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_DB: neon-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_USER: neon-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_PASSWORD: neon-proxy-pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_HOST: postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: proxy/run-dbcreation.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    depends_on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      postgres:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition: service_healthy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-it-in-bash-2">How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-2" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f postgres/docker-compose.yml pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f postgres/docker-compose.yml up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></details><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>4. Indexer service</summary><div><div class="collapsibleContent_i85q"><p>The indexer service indexes all the relevant Ethereum processing metadata consisting of <strong><code>signatures</code></strong>, <strong><code>transactions</code></strong>, <strong><code>blocks</code></strong>, <strong><code>receipts</code></strong>, <strong><code>accounts</code></strong>, etc. It gathers all this data from the Solana blockchain, filtering them by the EVM contract address. It also makes it possible to provide our users with the Ethereum API according to the data provided by the whole known operators.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="docker-composeyml-3">docker-compose.yml<a class="hash-link" href="#docker-composeyml-3" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  indexer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: indexer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/proxy:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SOLANA_URL: http://solana:8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_DB: neon-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_USER: neon-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_HOST: postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POSTGRES_PASSWORD: neon-proxy-pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      CONFIG: ci</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      START_SLOT: LATEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hostname: indexer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: proxy/run-indexer.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-it-in-bash-3">How To Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-3" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f indexer/docker-compose.yml pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f indexer/docker-compose.yml up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></details><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>5. Proxy service</summary><div><div class="collapsibleContent_i85q">The Proxy service is a core service that allows Ethereum-like transactions to be processed on [Solana](https://docs.solana.com/introduction), taking full advantage of the functionality native to Solana, including the ability to execute transactions in parallel. It&#x27;s available on 9090 port.<h4 class="anchor anchorWithStickyNavbar_mojV" id="docker-composeyml-4">docker-compose.yml<a class="hash-link" href="#docker-composeyml-4" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  proxy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/proxy:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_DB=neon-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_USER=neon-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_PASSWORD=neon-proxy-pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - POSTGRES_HOST=postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=http://solana:8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EXTRA_GAS=5000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EVM_LOADER=53DfF883gyixYNXnM7s5xhdeyV8mVk9T4i2hGV9vG9io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - CONFIG=ci</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - LOG_NEON_CLI_DEBUG=YES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - USE_COMBINED_START_CONTINUE=yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEON_CLI_TIMEOUT=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEW_USER_AIRDROP_AMOUNT=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - WRITE_TRANSACTION_COST_IN_DB=NO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - START_SLOT=LATEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - PERM_ACCOUNT_LIMIT=16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hostname: proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: ./proxy/run-proxy.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;9090:9090&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expose:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;9090&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-it-in-bash-4">How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-4" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f proxy/docker-compose.yml pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f proxy/docker-compose.yml up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></details><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>6. Faucet service</summary><div><div class="collapsibleContent_i85q">The Faucet service provides the liquidity in `NEON` to all the accounts that are mentioned in the incoming requests.<h4 class="anchor anchorWithStickyNavbar_mojV" id="docker-composeyml-5">docker-compose.yml<a class="hash-link" href="#docker-composeyml-5" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  faucet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: faucet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: neonlabsorg/faucet:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_RPC_BIND=0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_RPC_PORT=3333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=http://solana:8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEON_ETH_MAX_AMOUNT=50000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EVM_LOADER=53DfF883gyixYNXnM7s5xhdeyV8mVk9T4i2hGV9vG9io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_RPC_ALLOWED_ORIGINS=[&quot;https://neonswap.live&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_WEB3_ENABLE=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_SOLANA_ENABLE=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NEON_OPERATOR_KEYFILE=/opt/faucet/id.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_COMMITMENT=confirmed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: /opt/faucet/faucet --config /opt/proxy/faucet.conf run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - 3333:3333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expose:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;3333&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-it-in-bash-5">How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-5" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f faucet/docker-compose.yml pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f faucet/docker-compose.yml up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></details><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>7. Full test suite service</summary><div><div class="collapsibleContent_i85q"><p>The full test suite provides in general the <a href="https://docs.openzeppelin.com/learn/writing-automated-tests" target="_blank" rel="noopener noreferrer">OpenZeppelin tests</a> to make sure the infrastructure deployed by this guide works properly. At the end, the <code>full test suite</code> outputs the result in the following form:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Full test passing - 1743</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Full test threshold - 1700</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Check if 1743 is greater or equal 1700</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="full_test_suitedocker-composeyml">full_test_suite/docker-compose.yml<a class="hash-link" href="#full_test_suitedocker-composeyml" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  full_test_suite:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: ${FTS_CONTAINER_NAME:-full_test_suite}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: ${FTS_IMAGE:-neonlabsorg/full_test_suite:develop}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint: ./run-full-test-suite.sh 2&gt;/dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NETWORK_NAME=${NETWORK_NAME}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - PROXY_URL=${PROXY_URL}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - NETWORK_ID=${NETWORK_ID}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - REQUEST_AMOUNT=${REQUEST_AMOUNT}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FAUCET_URL=${FAUCET_URL}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - USE_FAUCET=${USE_FAUCET}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - SOLANA_URL=${SOLANA_URL}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FTS_USERS_NUMBER=${FTS_USERS_NUMBER}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - FTS_JOBS_NUMBER=${FTS_JOBS_NUMBER}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: local</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="full_test_suitelocalenv">full_test_suite/local.env<a class="hash-link" href="#full_test_suitelocalenv" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">NETWORK_NAME=local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROXY_URL=http://proxy:9090/solana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NETWORK_ID=111</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REQUEST_AMOUNT=20000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FAUCET_URL=http://faucet:3333/request_neon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_FAUCET=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SOLANA_URL=http://solana:8899</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FTS_USERS_NUMBER=15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FTS_JOBS_NUMBER=8</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-it-in-bash-6">How to Run It in Bash<a class="hash-link" href="#how-to-run-it-in-bash-6" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f full_test_suite/docker-compose.yml pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker-compose -f full_test_suite/docker-compose.yml --env-file full_test_suite/local.env up</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_mojV" id="logs">Logs<a class="hash-link" href="#logs" title="Direct link to heading">​</a></h2><p>After following the previous steps, you will have four running containers for the Neon EVM local environment: <strong>solana</strong>, <strong><code>postgres</code></strong>, <strong><code>proxy</code></strong>, <strong><code>indexer</code></strong>:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">49c864f47ccd   neonlabsorg/solana:v1.9.12-testnet   &quot;./run.sh&quot;               About an hour ago   Up About an hour (healthy)   8003/udp, 0.0.0.0:8899-8900-&gt;8899-8900/tcp, :::8899-8900-&gt;8899-8900/tcp, 9900/tcp   solana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">92f6b4492894   neonlabsorg/proxy:latest             &quot;./proxy/run-proxy.sh&quot;   46 hours ago        Up About an hour             0.0.0.0:9090-&gt;9090/tcp, :::9090-&gt;9090/tcp                                           proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">932d4d860629   neonlabsorg/proxy:latest             &quot;proxy/run-indexer.sh&quot;   46 hours ago        Up About an hour             9090/tcp                                                                            indexer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5a7df37069fc   postgres:14.0                        &quot;docker-entrypoint.s…&quot;   47 hours ago        Up About an hour (healthy)   127.0.0.1:5432-&gt;5432/tcp                                                            postgres</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>To look for events or errors, just run the <code>docker logs</code> for either the <code>solana</code> or <code>proxy</code> container:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker logs -f solana 2&gt;&amp;1 | grep -v &quot;Program Vote111111111111111111111111111111111111111&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ docker logs -f proxy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="remix-and-metamask-with-the-neon-evm">Remix and MetaMask with the Neon EVM<a class="hash-link" href="#remix-and-metamask-with-the-neon-evm" title="Direct link to heading">​</a></h2><p>Set up the &quot;MetaMask&quot; Chromium extension to connect to the proxy via Custom RPC at <code>http://localhost:9090/solana</code>. The following image describes how to set up the local Solana connection:  </p><div class="neon-img-box-300" style="text-align:center"><p><img loading="lazy" src="/assets/images/cluster-install-1-2a934237b77806464af491c468c92f13.png" width="300" height="402" class="img_E7b_"></p></div><p>Note: Once you create or import a new account in MetaMask, some NEONs will be airdropped into it.</p><p>Open Remix (also in Chromium) and select <code>Injected Web3</code> environment. You can deploy EVM-wrapped smart contracts on Solana and input these instructions:  </p><div class="neon-img-box-300" style="text-align:center"><p><img loading="lazy" src="/assets/images/cluster-install-2-0e37ce12c2afc407dcdd02b669044898.png" width="300" height="455" class="img_E7b_"></p></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="truffle-suite-with-neon-evm">Truffle Suite with Neon EVM<a class="hash-link" href="#truffle-suite-with-neon-evm" title="Direct link to heading">​</a></h2><p>Truffle is a popular platform to deploy and test Solidity programs. This section shows you how to check the compatibility of the Neon EVM and the Truffle suite.</p><p>In the new terminal, create a Truffle project and deploy contracts into EVM:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo npm install -g truffle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir myproject &amp;&amp; cd myproject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ truffle init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ npm install web3 @truffle/hdwallet-provider</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="common-truffle-settings">Common Truffle Settings<a class="hash-link" href="#common-truffle-settings" title="Direct link to heading">​</a></h3><p>Put your <code>truffle-config.js</code> into the Truffle root:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;const Web3 = require(&quot;web3&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const Web3eth = require(&quot;web3-eth&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const HDWalletProvider = require(&quot;@truffle/hdwallet-provider&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const web3eth = new Web3eth();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const accs = Array.from(Array(10), (_, x) =&gt; web3eth.accounts.create());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const privateKeys = accs.map((account) =&gt; account.privateKey);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  networks: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    solana: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      provider: new HDWalletProvider(privateKeys, &quot;http://127.0.0.1:9090/solana&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      from: accs[0].publicKey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      network_id: &quot;111&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      gas: 3000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      gasPrice: 1000000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  compilers: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    solc: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      version: &quot;0.8.9&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};&#x27; &gt; truffle-config.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="contract-creation">Contract Creation<a class="hash-link" href="#contract-creation" title="Direct link to heading">​</a></h3><p>Create a trivial contract at <code>contracts/Storage.sol</code>:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;// SPDX-License-Identifier: GPL-3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity &gt;=0.7.0 &lt;0.9.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract Storage {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 number;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function put(uint256 num) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        number = num;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function get() public view returns (uint256) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return number;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27; &gt; contracts/Storage.sol</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="testing">Testing<a class="hash-link" href="#testing" title="Direct link to heading">​</a></h3><p>You can now start testing <code>Storage</code> invocations with Truffle facility:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;const Storage = artifacts.require(&quot;Storage&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract(&quot;Storage&quot;, (accounts) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let storage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    beforeEach(async () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        storage = await Storage.new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    it(&quot;should store a value&quot;, async () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const setResult = await storage.put(248);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assert.equal(setResult.receipt.status, true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const value = await storage.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assert.equal(value, 248);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})&#x27; &gt; test/Storage.test.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ truffle test test/Storage.test.js --network solana</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="possible-problems">Possible Problems<a class="hash-link" href="#possible-problems" title="Direct link to heading">​</a></h3><p>If for some reasons you remove the Solana container and run it again, then all related accounts stored in foreign systems get invalid from that moment. That&#x27;s why you need to re-run the proxy container and reset the state of MetaMask and Truffle as well, to make all relations consistent.</p><p>To reset the MetaMask state, follow the steps at <code>Settings</code>, <code>Advanced</code>, <code>Reset Account</code>.</p><p>The Truffle state can be reset by redeploying it in the following way:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ truffle compile --network solana --reset</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><hr><p><em>Deploy your Solidity programs on the <a href="https://solana.com" target="_blank" rel="noopener noreferrer">Solana</a>-driven <a href="https://neon-labs.org/" target="_blank" rel="noopener noreferrer">Neon EVM</a></em>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/developing/dev_environment/connect_to_solana_via_proxy"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Connecting to the Neon Proxy</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/developing/deploy_facilities/using_remix"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using Remix</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#setting-up-the-neon-local-workspace-environment" class="table-of-contents__link toc-highlight">Setting up the Neon Local Workspace Environment</a></li><li><a href="#logs" class="table-of-contents__link toc-highlight">Logs</a></li><li><a href="#remix-and-metamask-with-the-neon-evm" class="table-of-contents__link toc-highlight">Remix and MetaMask with the Neon EVM</a></li><li><a href="#truffle-suite-with-neon-evm" class="table-of-contents__link toc-highlight">Truffle Suite with Neon EVM</a><ul><li><a href="#common-truffle-settings" class="table-of-contents__link toc-highlight">Common Truffle Settings</a></li><li><a href="#contract-creation" class="table-of-contents__link toc-highlight">Contract Creation</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#possible-problems" class="table-of-contents__link toc-highlight">Possible Problems</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/about/introduction">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/d9BhxNWTsj" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://neonlabs.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">NeonLabs.org</a></li><li class="footer__item"><a href="https://github.com/neonlabsorg" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Neon Labs</div></div></div></footer></div>
<script src="/assets/js/runtime~main.dcbbc947.js"></script>
<script src="/assets/js/main.af0b25c5.js"></script>
</body>
</html>